HelenOS Continuous Integration Testing Scripts
==============================================

The purpose of this repository is to have a universal script for building
and testing (almost) everything related to HelenOS. Currently, the script
is able to:
 - fetch latest versions of HelenOS and Coastline
 - build HelenOS for all supported architectures
 - build all harbours (the full matrix)
 - run automated tests in QEMU (ia32/amd64 only)


Running
-------

    # Fetch default branches and build everything.
    ./build.py
    
    # Limit paralellism
    ./build.py --jobs 3
    
    # Fetch from non-default branches
    ./build.py --helenos-repository lp:~your-name/helenos/your-branch


Tests
-----

See scripts in scenarios/ or the test-in-vm.sh script.

Simple test running malloc and checking its output looks like this:

    xx_start_machine
    xx_cmd "tester malloc1" assert="Test passed" timeout=120 die_on="demo"
    xx_stop_machine

Test checking that we are able to launch gcc (needs special image):

    # @needs gcc
    xx_start_machine
    xx_cmd "gcc" assert="no input files" timeout=20
    xx_stop_machine
